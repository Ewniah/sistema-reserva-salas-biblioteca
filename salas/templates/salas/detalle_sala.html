{% extends 'salas/base.html' %}

{% block title %}{{ sala.nombre }} - Detalles{% endblock %}

{% block content %}
<div class="card">
    <div class="flex-between mb-3">
        <div>
            <h2>{{ sala.nombre }}</h2>
            <p style="color: var(--gray); margin-top: 0.5rem;">
                ğŸ‘¥ Capacidad: {{ sala.capacidad }} personas
            </p>
        </div>
        {% if disponible %}
            <span class="badge badge-success" style="font-size: 1rem; padding: 0.75rem 1.5rem;">âœ“ Disponible</span>
        {% else %}
            <span class="badge badge-danger" style="font-size: 1rem; padding: 0.75rem 1.5rem;">âœ• Ocupada</span>
        {% endif %}
    </div>
    
    {% if sala.descripcion %}
        <div style="padding: 1.5rem; background: var(--bg-light); border-radius: 12px; margin-bottom: 1.5rem;">
            <p style="margin: 0; color: var(--gray);">ğŸ“ {{ sala.descripcion }}</p>
        </div>
    {% endif %}
    
    <div class="flex gap-2">
        <a href="{% url 'lista_salas' %}" class="btn btn-secondary">â† Volver</a>
        {% if disponible %}
            <a href="{% url 'crear_reserva' sala.id %}" class="btn btn-success">Reservar esta sala</a>
        {% endif %}
    </div>
</div>

{% if reservas %}
    <div class="card">
        <h3>ğŸ“… Reservas Activas y PrÃ³ximas</h3>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Reservante</th>
                        <th>Inicio</th>
                        <th>Fin</th>
                    </tr>
                </thead>
                <tbody>
                    {% for reserva in reservas %}
                        <tr>
                            <td><strong>{{ reserva.nombre_reservante }}</strong></td>
                            <td>{{ reserva.fecha_hora_inicio|date:"d/m/Y H:i" }}</td>
                            <td>{{ reserva.fecha_hora_fin|date:"d/m/Y H:i" }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% else %}
    <div class="card text-center">
        <p style="font-size: 3rem; margin-bottom: 1rem;">âœ¨</p>
        <h3>No hay reservas activas</h3>
        <p style="color: var(--gray);">Esta sala estÃ¡ completamente disponible.</p>
    </div>
{% endif %}
{% endblock %}
